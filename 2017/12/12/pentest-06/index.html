<!DOCTYPE html><html lang="zh-CN"><head><meta name="generator" content="Hexo 3.8.0"><meta charset="utf-8"><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta name="viewport" content="width=device-width, initial-scale=1"><meta name="author" content="你来人间一趟,你要看看太阳"><meta name="keywords" content="渗透测试"><link rel="alternative" href="/atom.xml" title="燕池" type="application/atom+xml"><link rel="icon" href="/favicon.png"><title>我与邻居wifi的爱恨情仇 - 燕池</title><link rel="stylesheet" href="/css/main.css"><link rel="stylesheet" href="/js/fancybox/jquery.fancybox.min.css"><!--[if lt IE 9]><script>(function(a,b){a="abbr article aside audio bdi canvas data datalist details dialog figcaption figure footer header hgroup main mark meter nav output progress section summary template time video".split(" ");for(b=a.length-1;b>=0;b--)document.createElement(a[b])})()</script><![endif]--><script src="/js/jquery-3.1.1.min.js"></script><script src="/js/fancybox/jquery.fancybox.min.js"></script></head><body style="opacity:0"><header class="head"><h1 class="head-title u-fl"><a href="/">燕池</a></h1><nav class="head-nav u-fr"><ul class="head-nav__list"><li class="head-nav__item"><a class="head-nav__link" href="/archives">目录</a></li><li class="head-nav__item"><a class="head-nav__link" href="/about">关于</a></li></ul></nav></header><main class="main"><article class="post"><header class="post__head"><time class="post__time" datetime="2017-12-12T07:11:35.000Z">December 12, 2017</time><h1 class="post__title"><a href="/2017/12/12/pentest-06/">我与邻居wifi的爱恨情仇</a></h1><div class="post__main echo"><p>0*01</p>
<p> 很早之前，我就开始觊觎隔壁小姐姐家的wifi，听我爸说，似乎跟我在同一个学校，还是个大四的师姐…奈何我是个死宅，而且对她没啥兴趣，一直拖着拜访什么鬼的。今天就以一种另一种形式对她家的无线网进行一次有趣拜访。</p>
<p>0*02</p>
<p>现在的家用路由器支持wifi一般为wpa/wpa2，没有连接密码我们只能进行Deauthentication，中文名为取消验证洪水攻击。简单直白的来说就是wifi的ddos，粗暴的断网，那样没有太大的实际意义，只能用来恶搞，或者在公共wifi网络让你一人独占网络。</p>
<p>所以很重要的一步，就是如何获得wifi密码。</p>
<p>0*03</p>
<p>01 wifi万能钥匙，最无脑，傻瓜式的wifi密钥分享模式。</p>
<p><img src="https://mmbiz.qpic.cn/mmbiz_jpg/FxZOT5yglKJGC0511udrAuaibC31D2S0IaoDY9KCeOrfn1Yv5cE12fkUwD6hFwW03T7NWyPFQs01mZMjibq2mlKA/0?wx_fmt=jpeg" alt="img"></p>
<p>很明显，附近的wifi相对来说，隐私都做的比较好，没有在万能钥匙上获取到。</p>
<p>像这类型的wifi密钥共享平台，腾讯在小程序方面也做了一个。</p>
<p><img src="https://mmbiz.qpic.cn/mmbiz_jpg/FxZOT5yglKJGC0511udrAuaibC31D2S0IRoDyRBiaU2lme34kQydxqOXt6FFJFK7mHq5E9TWA6cnZYqpvfcybpVg/0?wx_fmt=jpeg" alt="img"></p>
<p>在这个名为wifi一键连的小程序上也没有找到，看来这条路走不通了。</p>
<p>02 抓取握手包进行爆破</p>
<p>所需工具：kali2.0 ，Ralink 802.11 n WLAN（usb外置网卡），EWSA</p>
<p><img src="https://mmbiz.qpic.cn/mmbiz_jpg/FxZOT5yglKJGC0511udrAuaibC31D2S0IvjibfN3rOBy9Myeib9BLefDW4ATn62CFFRibgxExgKkdySVMbOgicEia08g/0?wx_fmt=jpeg" alt="img"></p>
<p>外置网卡需要支持监听模式。</p>
<p>首先运行iwconfig 查看外置网卡是否接入kali虚拟机</p>
<p><img src="https://mmbiz.qpic.cn/mmbiz_png/FxZOT5yglKJGC0511udrAuaibC31D2S0I9TuSQW0DZ8jEG0p9CO2giaEOYkPY7XJCshIm3lQa5TtmjLVwQYcT7zw/0?wx_fmt=png" alt="img"></p>
<p>如图wlan0就是外置网卡，如果你运行后并没有发现外置网卡，可以在vm内载入外置网卡，如下图。</p>
<p><img src="https://mmbiz.qpic.cn/mmbiz_png/FxZOT5yglKJGC0511udrAuaibC31D2S0IeBtVVzxAs0wnSrplQCKF5xMZUAyPK2yTvlddOegaE5tkSEkPTEIugg/0?wx_fmt=png" alt="img"></p>
<p>接下来将网卡开启监听模式。</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">airmon``-``ng start wlan``0</span><br></pre></td></tr></table></figure>
<p><code></code></p>
<p><img src="https://mmbiz.qpic.cn/mmbiz_png/FxZOT5yglKJGC0511udrAuaibC31D2S0IpdNkfAf4ibdK9fR3gdwDd7fp2QDG6t49uibENicaFXgSXCibicnlHztLTXw/0?wx_fmt=png" alt="img"></p>
<p><code></code></p>
<p>查看附近wifi</p>
<p>airodump-ng wlan0mon</p>
<p><img src="https://mmbiz.qpic.cn/mmbiz_png/FxZOT5yglKJGC0511udrAuaibC31D2S0IgSZBzI6TIm9mqkH0RP3bJHAH2e1uOOxINI5CRty2QQtgONiaFKhcWfQ/0?wx_fmt=png" alt="img">由于我所在的房间比可能比较靠近邻居的路由器，所以信号居然比我家的还要好，排到了第一位。</p>
<p>然后开始对目标进行监听与及握手包的抓取</p>
<p>airodump-ng -c 6 –bssid 8C:A6:DF:5E:D9:D7 -w huawei  wlan0mon</p>
<p>c：信道</p>
<p>bbsid：对应的bbsid</p>
<p>w：抓取握手包的名字（自定义）</p>
<p><img src="https://mmbiz.qpic.cn/mmbiz_png/FxZOT5yglKJGC0511udrAuaibC31D2S0INibpM6vibOmTaDU5ar1oLTMWWAlk85y0BCs3nOqvFVdWnQDIErV30j2Q/0?wx_fmt=png" alt="img"></p>
<p>我们发现有三个用户接入了热点，选一个你喜欢的对他进行断网操作，这样我们才能在它重新连接的时候抓取到握手包。</p>
<p>aireplay-ng -0 20 -c 70:77:81:97:13:29  -a 8C:A6:DF:5E:D9:D7 wlan0mon</p>
<p>-0：发包次数，次数越大断网时间越长</p>
<p>-c： 客户端mac地址</p>
<p>-a： 路由器mac地址</p>
<p><img src="https://mmbiz.qpic.cn/mmbiz_png/FxZOT5yglKJGC0511udrAuaibC31D2S0IcfOxLHFEKL8A3HBJ3p0W6iaWrfm5DzgeUg58kGCa0lruPcPGOV7Y18w/0?wx_fmt=png" alt="img"></p>
<p>然后我们耐心等待它重新连接，在监听窗口发现如下图便是抓取成功。</p>
<p><img src="https://mmbiz.qpic.cn/mmbiz_png/FxZOT5yglKJGC0511udrAuaibC31D2S0IYwSQzgtuOwEIjqbDkbfL9reErvjrT7bxGeIV023lAc2hBMoeNleoUA/0?wx_fmt=png" alt="img"></p>
<p>我们去根目录看看</p>
<p><img src="https://mmbiz.qpic.cn/mmbiz_png/FxZOT5yglKJGC0511udrAuaibC31D2S0Iib4ByAAJ04v6nwJMG9G2x1BDlaAJP5XWIJkPoeGWEIGHKdaFsASYSQQ/0?wx_fmt=png" alt="img"></p>
<p>把握手包文件复制到宿主机，运行EWSA 进行跑包，在跑包之前需要准备一份常用的弱口令字典。</p>
<p>导入字典，导入数据包，很幸运的撞到了。</p>
<p><img src="https://mmbiz.qpic.cn/mmbiz_png/FxZOT5yglKJGC0511udrAuaibC31D2S0IVFvbpZ1EZtDv35j0mibQZC3Ej7a1XMZV0okll5mufIXbgDZUGY09G8g/0?wx_fmt=png" alt="img"></p>
<p>0.03</p>
<p>当然这种爆破太靠运气了，如果我们的字典不够强大，或者对方的密码设置的太强大，那么该怎么办呢？</p>
<p>我一直坚信人永远是网络中最薄弱的一部分，钓鱼永远是最容易也是最无解的一部分。</p>
<p>所需工具：kali2.0 ，Ralink 802.11 n WLAN（usb外置网卡）fluxion </p>
<p>首先我们需要在kali内安装fluxion</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">git clone --recursive git@github.com:FluxionNetwork/fluxion.git</span><br></pre></td></tr></table></figure>
<p>然后进行抓取握手包，上述已经有了如何抓取，略过。</p>
<p>进入fluxion目录 启动fluxion 如果需要各种依赖，请更换官方kali源，耐心等待，会自行安装。</p>
<p><img src="https://mmbiz.qpic.cn/mmbiz_png/FxZOT5yglKJGC0511udrAuaibC31D2S0Iu4ibQbfxIl9rn8mIz96iciceicG0d5OhPdwIvmP5GSUUSjibrmp5OYHicfzw/0?wx_fmt=png" alt="img"></p>
<p>开始选择语言，新版的已经支持中文界面了。</p>
<p><img src="https://mmbiz.qpic.cn/mmbiz_png/FxZOT5yglKJGC0511udrAuaibC31D2S0ILGicXb5CyOheic0AHlMnTic3OMx6CAhyJ7PKqkrQ96seTAdj5DtsOuoyA/0?wx_fmt=png" alt="img"></p>
<p>选择网卡</p>
<p><img src="https://mmbiz.qpic.cn/mmbiz_png/FxZOT5yglKJGC0511udrAuaibC31D2S0IQAzeYaYmOrSAPvLMdHPVGD0YhszSyDXrdv96tLNicV0OicJXJGMnll7Q/0?wx_fmt=png" alt="img"></p>
<p>开始扫描信道</p>
<p><img src="https://mmbiz.qpic.cn/mmbiz_png/FxZOT5yglKJGC0511udrAuaibC31D2S0ISaTvWFBf3tqaXM23dTTzvqkCBRBJEIibNtQqJ4LVmJicjfRYEpibVLia5w/0?wx_fmt=png" alt="img"></p>
<p>等待扫描，出现目标后ctrl+c退出</p>
<p><img src="https://mmbiz.qpic.cn/mmbiz_png/FxZOT5yglKJGC0511udrAuaibC31D2S0IlmcicVIO9oFQtDhz5jPYgib25FZ4BDk2eBk9V2mNdWjWzB5mICsgFUXg/0?wx_fmt=png" alt="img"></p>
<p>选择目标</p>
<p><img src="https://mmbiz.qpic.cn/mmbiz_png/FxZOT5yglKJGC0511udrAuaibC31D2S0IkF74gwnt4vibhVqg8ZE5jib91k0hibovWibddoPcGqEm69z3mcKyHNZMicA/0?wx_fmt=png" alt="img"></p>
<p>选择伪造AP热点</p>
<p><img src="https://mmbiz.qpic.cn/mmbiz_png/FxZOT5yglKJGC0511udrAuaibC31D2S0I5jeNYzggz7eaYe0STIF3sPHzGDhzEtic7uPdSM80glkTR44f951oqNg/0?wx_fmt=png" alt="img"></p>
<p>选择伪造网卡</p>
<p><img src="https://mmbiz.qpic.cn/mmbiz_png/FxZOT5yglKJGC0511udrAuaibC31D2S0IliaKhmcrt1qn53uX7JhzmyqqSyI011ofiaq9ic1E5UbcibO7hfC6hK8YNw/0?wx_fmt=png" alt="img"></p>
<p>进行伪造</p>
<p><img src="https://mmbiz.qpic.cn/mmbiz_png/FxZOT5yglKJGC0511udrAuaibC31D2S0IXDYl2vicRm7aBaMTicxPFlxeMyh0OyDTv6c6zU8hZhymQtHjAFTspyzw/0?wx_fmt=png" alt="img"></p>
<p>选择自定义输入握手包，并输入握手包绝对路径。</p>
<p><img src="https://mmbiz.qpic.cn/mmbiz_png/FxZOT5yglKJGC0511udrAuaibC31D2S0I0eSqibYSzftqcUmH9wHwAExCBbIwbxaKwotp0HjNfxvj8sJZmSEsQFg/0?wx_fmt=png" alt="img"></p>
<p>选择验证模式</p>
<p><img src="https://mmbiz.qpic.cn/mmbiz_png/FxZOT5yglKJGC0511udrAuaibC31D2S0IUWHrqFfgQMrnuZzXWmPeLibeHJkAaicpBxg40fo9VQ654qfcWcsyBocw/0?wx_fmt=png" alt="img"></p>
<p>然后选择中文的钓鱼页面</p>
<p><img src="https://mmbiz.qpic.cn/mmbiz_png/FxZOT5yglKJGC0511udrAuaibC31D2S0Iyb5F6VMWpHZKZficYKbBVrajZPfAucrYncGdt3pzgkLxib9lolLgdqgA/0?wx_fmt=png" alt="img"></p>
<p>这样我们就创建了一个钓鱼页面，flucxion会自动对目标客户机进行断网，迫使客户机连上我们的钓鱼热点。</p>
<p><img src="https://mmbiz.qpic.cn/mmbiz_png/FxZOT5yglKJGC0511udrAuaibC31D2S0I71fYaENApTTGCjAfgo5n4BJqtojk8Icne66yBW6lcnic9R3uVKiabiayQ/0?wx_fmt=png" alt="img"></p>
<p>然后我们看看附近的wifi热点发现已经有了两个一样的热点</p>
<p><img src="https://mmbiz.qpic.cn/mmbiz_png/FxZOT5yglKJGC0511udrAuaibC31D2S0ITTGNyX2IcIP4KIHtmcDY7JiaHkEDTM0gMWFrrwfzjlj3hEic3iaJQH2og/0?wx_fmt=png" alt="img"></p>
<p>​     其中一个便是我们的钓鱼热点，耐心等待邻居使用网络，待她发现自己的网络需要再次输入密码时候，我们这边便会接收到原本属于她的wifi密码。</p>
<p><img src="https://mmbiz.qpic.cn/mmbiz_png/FxZOT5yglKJGC0511udrAuaibC31D2S0Iia7NOAzX1wS9ycklRrH3xwVWmm3nfrWGOQicISGayA6ZUee0KtfqbuNw/0?wx_fmt=png" alt="img"></p>
<p>据我所知，这种断网钓鱼攻击，基本上没有企业的员工能够防得住，这类型的攻击还是需要多多提高安全意识。</p>
<p>0*04无敌的社工</p>
<p>用糖跟跟邻居小孩问，你要是能说对你家的wifi密码，就给你糖糖哦。</p>
<p>请勿进行违法犯罪行为，文章只做研究可用。</p>
</div></header><footer class="post__foot u-cf"><ul class="post__tag u-fl"><li class="post__tag__item"><a class="post__tag__link" href="/tags/无线安全，渗透测试/">无线安全，渗透测试</a></li></ul></footer></article><section class="reward"><a class="btn-reward" href="#">打赏</a><div class="reward-wrapper clearfix"><img src="/img/wechat.png" title="加我微信"></div></section></main><footer class="foot"><div class="foot-copy">&copy; 2017 - 2019 你来人间一趟,你要看看太阳</div></footer><script src="/js/scroller.js"></script><script src="/js/main.js"></script></body></html>